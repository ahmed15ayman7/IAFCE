# صفحة مراقبة الغياب للآباء

## الوصف
صفحة تتيح للآباء مراقبة غياب أطفالهم ومتابعة إشعارات الغياب بشكل تفصيلي.

## الميزات

### 1. الصفحة الرئيسية (`/parent/absences`)
- **إحصائيات سريعة**: عرض إجمالي الغياب، الغياب هذا الأسبوع والشهر، والإشعارات الجديدة
- **قائمة الطلاب**: عرض جميع أطفال الوالد مع معلومات أساسية عن غيابهم
- **فلاتر الإشعارات**: تصفية الإشعارات حسب (الكل، غير المقروءة، العاجلة)
- **جدول الإشعارات**: عرض تفصيلي لجميع إشعارات الغياب

### 2. صفحة تفاصيل الطالب (`/parent/absences/[studentId]`)
- **معلومات الطالب**: الاسم، الصف، معدل الحضور، إجمالي الغياب
- **إحصائيات سريعة**: الغياب هذا الأسبوع والشهر، معدل الحضور
- **معدل الحضور**: شريط تقدم لمعدل الحضور العام والمواد الدراسية
- **جدول تفاصيل الغياب**: تفاصيل كل غياب مع السبب والمعلم والحالة
- **الإحصائيات الشهرية**: مقارنة معدلات الحضور عبر الأشهر

## APIs المستخدمة

### الإشعارات
```typescript
// الحصول على إشعارات المستخدم
notificationApi.getAllByUserId(userId: string)

// الحصول على الإشعارات غير المقروءة
notificationApi.getUnread()

// تحديث حالة الإشعار كمقروء
notificationApi.markAsRead(id: string)
```

### الحضور
```typescript
// الحصول على إحصائيات الحضور للطالب
attendanceApi.getStudentStats(studentId: string)

// الحصول على حضور درس معين
attendanceApi.getLessonAttendance(lessonId: string)

// الحصول على الحضور حسب التاريخ
attendanceApi.getByDate(date: string)
```

## الملفات

### الصفحة الرئيسية
- `page.tsx` - الصفحة الرئيسية لمراقبة الغياب
- `loading.tsx` - صفحة التحميل
- `error.tsx` - صفحة الخطأ
- `not-found.tsx` - صفحة 404

### صفحة تفاصيل الطالب
- `[studentId]/page.tsx` - صفحة تفاصيل غياب طالب معين

## البيانات الوهمية

### إشعارات الغياب
```typescript
const mockNotifications = [
    {
        id: '1',
        type: 'GENERAL',
        title: 'إشعار غياب',
        message: 'الطالب أحمد محمد غاب عن الحصة الأولى اليوم',
        urgent: true,
        isImportant: true,
        read: false,
        createdAt: new Date('2024-01-15T08:00:00Z'),
    }
];
```

### إحصائيات الغياب
```typescript
const mockStats = {
    totalAbsences: 15,
    thisWeek: 3,
    thisMonth: 8,
    unreadNotifications: 2,
};
```

### بيانات الطلاب
```typescript
const mockStudents = [
    {
        id: '1',
        name: 'أحمد محمد',
        grade: 'الصف الثالث',
        absences: 8,
        attendanceRate: 85,
        lastAbsence: '2024-01-15',
    }
];
```

## التنقل

### من القائمة الرئيسية
- تم إضافة رابط "إشعارات الغياب" في قائمة التنقل للآباء
- المسار: `/parent/absences`

### من صفحة الطالب
- زر "عرض التفاصيل" في بطاقة كل طالب
- المسار: `/parent/absences/[studentId]`

## التصميم

### الألوان
- **أحمر**: للغياب والإشعارات العاجلة
- **برتقالي**: للغياب هذا الأسبوع
- **أزرق**: للغياب هذا الشهر
- **أخضر**: للإشعارات الجديدة

### الرسوم المتحركة
- استخدام Framer Motion للانتقالات السلسة
- تأخير متدرج للعناصر لتحسين تجربة المستخدم

## الأداء

### تحسينات التحميل
- استخدام Dynamic Imports للمكونات الثقيلة
- Skeleton Loading أثناء التحميل
- React Query مع Caching للبيانات

### إعدادات React Query
```typescript
{
    staleTime: 5 * 60 * 1000, // 5 دقائق
    gcTime: 10 * 60 * 1000,   // 10 دقائق
}
```

## الاستخدام المستقبلي

### APIs مطلوبة للتنفيذ الكامل
1. **API للحصول على أطفال الوالد**
2. **API لإحصائيات الغياب الخاصة بالآباء**
3. **API لتفاصيل الغياب لكل طالب**
4. **API لتحديث حالة الإشعارات**

### ميزات إضافية مقترحة
1. **إشعارات فورية** عند حدوث غياب جديد
2. **تقارير PDF** لسجلات الغياب
3. **مقارنة بين الطلاب** في نفس العائلة
4. **تنبيهات للغياب المتكرر**
5. **تواصل مع المعلمين** بخصوص الغياب 